
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
</head>
<body>
    <h2>{{ title }}</h2>
    <ul>
        {% for i in listbook %}          
            <li> the id : {{i.id}}  - the title : {{i.name}} <a  download="download" href="{{ i.url }}">download</a> ||  <a   href="{{ i.direct_url }}" download >downloa</a>  <a href="#" onclick="downloadFile('{{ i.direct_url }}');">Click here to download</a> </li>
        {% endfor %}
    </ul>
    <script>
        function downloadFile(fileUrl) {
            // Create an invisible anchor element
            var anchor = document.createElement('a');
            anchor.style.display = 'none';
            // Set the anchor's href to the file URL
            anchor.href = fileUrl;
            // Set the download attribute (if supported)
            if ('download' in anchor) {
                anchor.download = fileUrl.substring(fileUrl.lastIndexOf('/') + 1);
            }
            // Trigger a click event on the anchor
            document.body.appendChild(anchor);
            anchor.click();
            // Clean up
            document.body.removeChild(anchor);
        }
    </script>
</body>
</html>




<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
</head>
<body>
    <h2>{{ title }}</h2>
    <ul>
        {% for i in listbook %}
            <li> the id : {{i.id}}  - the title : {{i.name}} 
                <a href="{{ i.url }}" onclick="captureNextLink('{{ i.url }}', {{ forloop.counter }})">download</a>
            </li>
        {% endfor %}
    </ul>

    <script>
        let currentIndex = 0;

        function captureNextLink(url, index) {
            if (index === currentIndex) {
                // Capture and use the URL of the next link
                console.log("Captured URL of the next link:", url);
                currentIndex++;
                
                // You can perform any other actions you need with the URL here
            }
        }
    </script>
</body>
</html>

 -->



